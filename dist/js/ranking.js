var thisClass,rankingNavigation=function(){thisClass=this},rank=(rankingNavigation.prototype={rankNavPositionArray:[],rankNavWidthArray:[],serverType:null,pageGenre:null,genreData:{all:{genreNo:["000","001","101","007","005","003","002","006","004"],period:"daily",displayNumber:5,naviTitle:["総合(全ジャンル)","映画","アニメ","音楽","漫画","バイク","ゲーム","PCソフト・周辺機器"],naviTitleEn:["all","movie","animation","music","cartoon","bike","game","pc-soft-accessory"]},movie:{genreNo:["001","0011","0012","0013","0014","0015"],period:"daily",displayNumber:5,naviTitle:["総合（映画）","SFX","アクション","サスペンス","ドラマ","ホラー","ドキュメンタリー","歴史","音楽"],naviTitleEn:["all-movie","sfx","action","suspense","drama","horror","documentary","history","music"]},comic:{genreNo:["007","0071","0072","0073","0074"],period:"daily",displayNumber:5,naviTitle:["総合（マンガ）","少年マンガ","少女マンガ","アダルト","BL"],naviTitleEn:["all-cartoon","for-boys","for-girls","for-adults","boys-love"]},music:{genreNo:["005","0051","0052","0053","0054"],period:"daily",displayNumber:5,naviTitle:["総合（洋書）","J-Pop","韓流","洋楽","EDM","Hip Hop","R&B","Dance","アイドル","歌謡曲・演歌"],naviTitleEn:["all-music","jpop","kpop","europeAndAmerica","edm","hiphop","R&B","dance","idol","kayoukyoku"]},book:{genreNo:["003","0031","0032","0033","0034"],period:"daily",displayNumber:5,naviTitle:["総合（本）","小説","ジャーナリズム","エッセイ","絵本","ビジネス","自己啓発","マネー"],naviTitleEn:["all-book","novel","journalism","essay","picture-book","business","self-development","money"]},motorcycle:{genreNo:["002","0021","0022","0023","0024"],period:"daily",displayNumber:5,naviTitle:["総合（バイク）","中型ロード","小型ロード","大型ロード","スクーター","オフロード"],naviTitleEn:["all-bike","medium-road-type","small-road-type","large-road-type","scooter","off-road"]},game:{genreNo:["006","0061","0062","0063","0064"],period:"daily",displayNumber:5,naviTitle:["総合（ゲーム）","ニンテンドースイッチ","ニンテンドー3DS","PS4","おもちゃ"],naviTitleEn:["all-game","nintendo-switch","nintendo-3DS","PS4","toys"]},PC:{genreNo:["004","0041","0042","0043","0044"],period:"daily",displayNumber:5,naviTitle:["総合（PC・周辺機器）","タブレット・ノート","PC","ソフト","周辺機器"],naviTitleEn:["all-pc","tablet-note","pc","soft","accessory"]}},rankContentsHeightFlag:!1,rankContentsHeight:275,rankStock:{action:"stockArray",genre:null,period:"daily",number:5},UrlDiscrimination:function(){var a=window.location.href;a.match("/movie/")?thisClass.pageGenre="movie":a.match("/comic/")?thisClass.pageGenre="comic":a.match("/music/")?thisClass.pageGenre="music":a.match("/book/")?thisClass.pageGenre="book":a.match("/motorcycle/")?thisClass.pageGenre="motorcycle":a.match("/game/")?thisClass.pageGenre="game":a.match("/pc/")?thisClass.pageGenre="pc":thisClass.pageGenre="all",thisClass.setNavHtml()},setNavHtml:function(){for(var a=$("<ul>").addClass("navRank"),s=0;s<thisClass.genreData[thisClass.pageGenre].naviTitle.length;s++){var t=$("<li>").addClass("js_rank").addClass("js_"+thisClass.genreData[thisClass.pageGenre].naviTitleEn[s]).text(thisClass.genreData[thisClass.pageGenre].naviTitle[s]);a.append(t)}$(".rankTabArea").append(a),thisClass.switchingNavAndPage(0)},callApi:function(s,t,a,n){$(".rankContents").empty(),$(".rankSpinner").css({display:"block"}),$.ajax({url:"./js/json/"+s+".json",type:"GET",dataType:"json",timeout:1e4,success:function(a){thisClass.setHtml(a,t,s)},error:function(a,s,t){console.log("NG because : "+s.responseText),console.log("The content of the ranking has been deleted in relation to the API."),$(".rankBox").remove()},complete:function(){}})},formatPrice:function(a){return a.replace(/(\d)(?=(\d{3})+$)/g,"$1,")},ellipsis:function(){$(".rankData__ttl").css({overflow:"hidden",height:"2.6rem","line-height":"1.3"}),$(".rankData__ttl").each(function(){var a=$(this),s=a.html(),t=a.clone();if(t.css({display:"none",position:"absolute","background-color":"red",overflow:"visible"}).width(a.width()).height("auto"),a.after(t),t.height()>a.height()){for(;0<s.length&&t.height()>a.height();)s=s.substr(0,s.length-1),t.html(s+"...");a.html(t.html()),t.remove()}})},setHtml:function(a,s,t){for(var n,e,i,r,o,l,d,h,c=0;c<a.data.length;c++)h=(d=(c<3?(e=$("<img>").attr("src",a.data[c].imageUrl+"?fitin=200:200").attr("alt",a.data[c].title),n=$("<span>").addClass("rankImg__mark").text(a.data[c].rank),"1"==a.data[c].rank?n.addClass("icon_gold"):"2"==a.data[c].rank?n.addClass("icon_silver"):"3"==a.data[c].rank&&n.addClass("icon_bronze"),e=$("<div>").addClass("rankImg").append(n).append(e),l=$("<dd>").addClass("rankData__price").text(thisClass.formatPrice(a.data[c].price)+"円(税込)"),o=$("<dd>").addClass("rankData__auther").text(a.data[c].author),i=$("<span>").addClass("rankData__ttl").text(a.data[c].title),r=$("<dt>").addClass("rankData__ttl_wrap").append(i),o=$("<dl>").addClass("rankData").append(r).append(o).append(l),l=$("<div>").addClass("rankDataWrap").append(o),$("<div>").addClass("rankItem")):(n=$("<span>").addClass("rankImg__mark").addClass("icon_usuall").text(a.data[c].rank),e=$("<div>").addClass("rankImg2").append(n),(d=$("<dd>").addClass("rankData__autherAndPrice")).html('<span class="innerAuther">'+a.data[c].author+'</span><span class="innerPrice">'+thisClass.formatPrice(a.data[c].price)+"円(税込)</span>"),i=$("<dt>").addClass("rankData__ttl").text(a.data[c].title),r=$("<dt>").addClass("rankData__ttl_wrap").append(i),o=$("<dl>").addClass("rankData").append(r).append(d),l=$("<div>").addClass("rankDataWrap").append(o),$("<div>").addClass("rankItem").addClass("itemUsuall"))).append(e).append(l),$("<div>").addClass("js_rankLinkBox").data("link",a.data[c].link).css({cursor:"pointer"}).append(d)),$(".rankContents").append(h);0==s?$(".js_rankLinkBtn").attr({href:"//suzuki/"+t+"s"}):"fbook"==thisClass.pageGenre?$(".js_rankLinkBtn").attr({href:"//suzuki/"+t+"/t"}):$(".js_rankLinkBtn").attr({href:"//suzuki/"+t+"/u"}),$(document).ready(function(){thisClass.applyCss()})},applyCss:function(){$(".rankContents").stop().animate({opacity:1},200,function(){$(".rankSpinner").css({display:"none"})}),1==thisClass.rankContentsHeightFlag?0==thisClass.rankContentsHeight?$(".rankContents").css({"margin-top":"1.2rem",height:"28rem"}):$(".rankContents").css({"margin-top":"1.2rem",height:thisClass.rankContentsHeight+"px"}):(thisClass.rankContentsHeight=$(".rankContents").height(),$(".rankContents").css({"margin-top":"1.2rem",height:"28rem"}),thisClass.rankContentsHeightFlag=!0),thisClass.ellipsis(),thisClass.attachEvents()},setNavWidthPositionArray:function(a){thisClass.rankNavPositionArray=[],thisClass.rankNavWidthArray=[];var s=0;$(".js_rank").each(function(){var a=$(this).width();thisClass.rankNavWidthArray.push(a+=20)});for(var t=0;t<thisClass.rankNavWidthArray.length;t++)0==t?thisClass.rankNavPositionArray.push(0):(s=s+Number(thisClass.rankNavWidthArray[t-1])+.5,thisClass.rankNavPositionArray.push(s));$(document).ready(function(){thisClass.setNavAttribute(a)})},setNavAttribute:function(a){$("li:nth-of-type("+(a+1)+")").addClass("pressed"),$(".navRank").animate({scrollLeft:thisClass.rankNavPositionArray[a]},200),0==a?($(".rankLeftNavArrow").css({display:"none"}),$(".rankrightNavArrow").css({display:"table"})):a==thisClass.genreData[thisClass.pageGenre].naviTitle.length-1?($(".rankLeftNavArrow").css({display:"table"}),$(".rankrightNavArrow").css({display:"none"})):($(".rankLeftNavArrow").css({display:"table"}),$(".rankrightNavArrow").css({display:"table"}));for(var s=0;s<thisClass.rankNavWidthArray.length;s++)$(".js_rank:nth-of-type("+(s+1)+")").css({left:thisClass.rankNavPositionArray[s]+"px"})},judgeTouchAction:function(a,s,t,n,e){a-=s,s=t-n;80<a?thisClass.executePageNavDirection("right"):a<-80?thisClass.executePageNavDirection("left"):(t=e.data("link"))&&Math.abs(s)<5&&Math.abs(a)<5&&(location.href=t)},caluCount:function(a,s){return"up"==s?++a>thisClass.genreData[thisClass.pageGenre].naviTitle.length-1&&(a=0):--a<0&&(a=thisClass.genreData[thisClass.pageGenre].naviTitle.length-1),a},executePageNavDirection:function(a){var s,t=thisClass.rankStock.genre;"left"==a?(s=thisClass.caluCount(t,"down"),thisClass.switchingNavAndPage(s),thisClass.rankStock.genre=s):"right"==a&&(s=thisClass.caluCount(t,"up"),thisClass.switchingNavAndPage(s),thisClass.rankStock.genre=s)},switchingNavAndPage:function(a){$(".rankContents").stop().animate({opacity:0},200),$(".js_rank").removeClass("pressed"),$(document).ready(function(){thisClass.setNavWidthPositionArray(a),thisClass.callApi(thisClass.genreData[thisClass.pageGenre].genreNo[a],a,thisClass.genreData[thisClass.pageGenre].period,thisClass.genreData[thisClass.pageGenre].displayNumber),thisClass.removeEvents()})},attachEvents:function(){var s,t,n,e,i="ontouchstart"in window;$(document).on("touchstart mousedown",".js_rankLinkBox",function(a){a.stopPropagation(),s=(i?a.changedTouches[0]:a).pageX,n=(i?a.changedTouches[0]:a).pageY}),$(document).on("touchmove mousemove",".js_rankLinkBox",function(a){a.stopPropagation()}),$(document).on("touchend mouseup",".js_rankLinkBox",function(a){a.stopPropagation(),t=(i?a.changedTouches[0]:a).pageX,e=(i?a.changedTouches[0]:a).pageY;a=$(this);thisClass.judgeTouchAction(s,t,n,e,a)}),$(".js_rank").on("click touch",function(){var a=$(this).index();thisClass.rankStock.genre=a,thisClass.switchingNavAndPage(a)})},removeEvents:function(){$(document).off("touchend mouseup touchmove mousemove touchstart mousedown",".js_rankLinkBox"),$(".js_rank").off("click touch")},initial:function(){var a=thisClass.rankStock.genre;null==a||"undefined"==a||""==a?thisClass.UrlDiscrimination():thisClass.switchingNavAndPage(a)}},new rankingNavigation);window.onload=function(){rank.initial()};